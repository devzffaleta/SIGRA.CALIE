{{! views/primeiro-acesso.hbs }}

<h2>Configuração Inicial - Primeiro Administrador</h2>
<p>Como este é o primeiro acesso, precisamos configurar a conta principal de administrador.</p>

{{#if errorMessage}}
    <div class="alert alert-danger" role="alert" style="color: red; border: 1px solid red; padding: 10px; margin-bottom: 15px;">
        {{errorMessage}}
    </div>
{{/if}}

<form method="POST" action="/primeiro-acesso">
    <div class="form-group">
        <label for="nome">Nome Completo:</label>
        <input type="text" id="nome" name="nome" class="form-control" value="{{formData.nome}}" required>
    </div>

    <div class="form-group">
        <label for="login">Login de Usuário:</label>
        <input type="text" id="login" name="login" class="form-control" value="{{formData.login}}" required>
    </div>

    <div class="form-group">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" class="form-control" value="{{formData.email}}" required>
    </div>

    <div class="form-group">
        <label for="cpf">CPF:</label>
        <input type="text" id="cpf" name="cpf" class="form-control" placeholder="000.000.000-00" value="{{formData.cpf}}" required>
        {{! TODO: Adicionar máscara de CPF no frontend }}
    </div>

    <div class="form-group">
        <label for="telefone">Telefone:</label>
        <input type="tel" id="telefone" name="telefone" class="form-control" placeholder="(00) 90000-0000" value="{{formData.telefone}}" required>
         {{! TODO: Adicionar máscara de telefone no frontend }}
    </div>

    <div class="form-group">
        <label for="senha">Senha:</label>
        <input type="password" id="senha" name="senha" class="form-control" required>
    </div>

    <div class="form-group">
        <label for="confirmarSenha">Confirmar Senha:</label>
        <input type="password" id="confirmarSenha" name="confirmarSenha" class="form-control" required>
        {{! TODO: Adicionar validação de confirmação de senha no frontend e backend }}
    </div>

    <hr>
    <h4>Endereço (Opcional)</h4>
     <div class="form-group">
        <label for="cep">CEP:</label>
        <input type="text" id="cep" name="cep" class="form-control" placeholder="00000-000" value="{{formData.cep}}">
         {{! TODO: Adicionar busca por CEP }}
    </div>
     <div class="form-group">
        <label for="logradouro">Logradouro:</label>
        <input type="text" id="logradouro" name="logradouro" class="form-control" value="{{formData.logradouro}}">
    </div>
     <div class="form-group">
        <label for="numero">Número:</label>
        <input type="text" id="numero" name="numero" class="form-control" value="{{formData.numero}}">
    </div>
     <div class="form-group">
        <label for="complemento">Complemento:</label>
        <input type="text" id="complemento" name="complemento" class="form-control" value="{{formData.complemento}}">
    </div>
     <div class="form-group">
        <label for="bairro">Bairro:</label>
        <input type="text" id="bairro" name="bairro" class="form-control" value="{{formData.bairro}}">
    </div>
     <div class="form-group">
        <label for="cidade">Cidade:</label>
        <input type="text" id="cidade" name="cidade" class="form-control" value="{{formData.cidade}}">
    </div>
     <div class="form-group">
        <label for="estado">Estado (UF):</label>
        <input type="text" id="estado" name="estado" class="form-control" maxlength="2" value="{{formData.estado}}">
    </div>

    {{! TODO: Se buscar perfis, adicionar o select aqui }}
    {{! <div class="form-group"> }}
    {{!     <label for="codigo_perfil_FK">Perfil:</label> }}
    {{!     <select id="codigo_perfil_FK" name="codigo_perfil_FK" class="form-control" required> }}
    {{!         <option value="">Selecione...</option> }}
    {{!         {{#each perfis}} }}
    {{!             <option value="{{this.perfil_codigo_PK}}">{{this.perfil_nome}}</option> }}
    {{!         {{/each}} }}
    {{!     </select> }}
    {{! </div> }}

    <button type="submit" class="btn btn-primary">Criar Administrador</button>
</form>

{{! Adicionar scripts para máscaras e validações aqui se necessário }}
<script>
    // Exemplo básico de validação de confirmação de senha
    const form = document.querySelector('form');
    const senhaInput = document.getElementById('senha');
    const confirmarSenhaInput = document.getElementById('confirmarSenha');

    if (form && senhaInput && confirmarSenhaInput) {
        form.addEventListener('submit', function(event) {
            if (senhaInput.value !== confirmarSenhaInput.value) {
                alert('As senhas não coincidem!');
                event.preventDefault(); // Impede o envio do formulário
                confirmarSenhaInput.focus();
            }
        });
    }
</script> 